# vim: et sw=4 ts=4 ft=zsh
# zplug module settings
if zplug check junegunn/fzf-bin; then
    export FZF_DEFAULT_OPTS='--height 40% --reverse --border --inline-info --color=dark,bg+:235,hl+:10,pointer:5'
    export TMUX_FZF_OPTIONS="${FZF_DEFAULT_OPTS}"
fi
if zplug check trapd00r/LS_COLORS; then
    if ! (( ${+commands[dircolors]} )) && (( ${+commands[gdircolors]} )) && [[ ! -L "~/bin/dircolors" ]]; then
        ln -fs $(command -v gdircolors) ~/bin/dircolors
    fi
    [[ -z "${LS_COLORS}" ]] && (( ${+commands[dircolors]} )) && eval $(dircolors -b ${ZPLUG_REPOS}/trapd00r/LS_COLORS/LS_COLORS)
fi
if zplug check gpakosz/.tmux; then
    tmux_conf="${ZPLUG_REPOS}/gpakosz/.tmux/.tmux.conf"
    [[ -s ${tmux_conf} ]] && [[ ! -L ${HOME}/.tmux.conf ]] && ln -fs ${tmux_conf} ~/
    [[ -s ${tmux_conf}.local ]] && [[ ! -L ${HOME}/.tmux.conf.local ]] && ln -fs ${tmux_conf}.local ~/
fi
if zplug check github/hub; then
    if ! (( ${+commands[hub]} )); then
        case ${(L)$(uname -s)} in darwin) (( ${+commands[go]} )) && brew install hub ;; esac
        case ${(L)$(uname -s)} in linux) sudo apt -y install hub ;; esac
    fi
fi
if zplug check nojhan/liquidprompt; then
    #
fi
# https://denysdovhan.com/spaceship-prompt/docs/Options.html
if zplug check denysdovhan/spaceship-prompt; then
    SPACESHIP_PROMPT_ADD_NEWLINE=false
    SPACESHIP_PROMPT_SEPARATE_LINE=false
    SPACESHIP_BATTERY_THRESHOLD=20
fi
if zplug check zsh-users/zsh-autosuggestions; then
    ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=075'
    ZSH_AUTOSUGGEST_STRATEGY=(history completion)
    ZSH_AUTOSUGGEST_BUFFER_MAX_SIZE=15
    ZSH_AUTOSUGGEST_USE_ASYNC=true
    ZSH_AUTOSUGGEST_CLEAR_WIDGETS+=(history-substring-search-up history-substring-search-down)
    ZSH_AUTOSUGGEST_CLEAR_WIDGETS=("${(@)ZSH_AUTOSUGGEST_CLEAR_WIDGETS:#(up|down)-line-or-history}")
fi
if zplug check zsh-users/zsh-syntax-highlighting; then
    ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets pattern)
    ## To have commands starting with `rm -rf` in red:
    ZSH_HIGHLIGHT_PATTERNS+=('rm -rf *' 'fg=white,bold,bg=red')
    #ZSH_HIGHLIGHT_STYLES[globbing]='none'
    ZSH_HIGHLIGHT_STYLES[bracket-level-1]='fg=blue'
    ZSH_HIGHLIGHT_STYLES[bracket-level-2]='fg=cyan'
    ZSH_HIGHLIGHT_STYLES[bracket-level-3]='fg=green'
    ZSH_HIGHLIGHT_STYLES[bracket-level-4]='fg=yellow'
fi
if zplug check sindresorhus/pure; then
    prompt_newline='%666v'
    PURE_CMD_MAX_EXEC_TIME=0
    PURE_GIT_DOWN_ARROW='↓'
    PURE_GIT_UP_ARROW='↑'
    PROMPT=' %(?.%F{green}➜.%F{red}➜)%f '
    zstyle :prompt:pure:path color white
    zstyle :prompt:pure:git:stash show yes
fi
if zplug check modules/utility; then
    case ${(L)$(uname -s)} in darwin) (( ${+commands[gls]} )) && aliases[ls]='gls --color=auto'; esac
fi
if zplug check modules/history; then
    HISTFILE="$HOME/.zhistory"
    # http://zsh.sourceforge.net/Guide/zshguide02.html#l18
    setopt HIST_REDUCE_BLANKS   # removing any excess blanks that mean nothing to the shell
    setopt HIST_NO_STORE        # tells the shell not to store history or fc commands
    setopt HIST_NO_FUNCTIONS    # not to store function definitions
fi
if zplug check modules/utility; then
    zstyle ':prezto:module:utility:ls'    color 'yes'
    zstyle ':prezto:module:utility:diff'  color 'yes'
    zstyle ':prezto:module:utility:wdiff' color 'yes'
    zstyle ':prezto:module:utility:make'  color 'yes'
fi
if zplug check modules/tmux; then
    zstyle ':prezto:module:tmux:auto-start' local  'no'
    zstyle ':prezto:module:tmux:auto-start' remote 'yes'
fi
if zplug check modules/terminal; then
    zstyle ':prezto:module:terminal' auto-title 'yes'
    zstyle ':prezto:module:terminal:window-title' format '%n@%m: %s'
    zstyle ':prezto:module:terminal:tab-title' format '%m: %s'
    zstyle ':prezto:module:terminal:multiplexer-title' format '%s'
fi
if zplug check modules/ruby; then
    zstyle ':prezto:module:ruby:chruby' auto-switch 'yes'
fi
if zplug check modules/python; then
    zstyle ':prezto:module:python' skip-virtualenvwrapper-init 'on'
    zstyle ':prezto:module:python' conda-init 'on'
    zstyle ':prezto:module:python:virtualenv' auto-switch 'yes'
    zstyle ':prezto:module:python:virtualenv' initialize 'no'
fi
